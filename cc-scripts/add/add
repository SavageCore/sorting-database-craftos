local tArgs = {...}
local name = tArgs[1]
local short = tArgs[2]
local sortdir = "bottom"
local invdir = 4
local wwwdir = "http://savagecore.myaddress.com"
local password = "XXXXXXXXXXXX"

if(name == nil or short == nil) then
  print("Usage: add <Full item name> <Short item name>")
else
  if not peripheral.isPresent(sortdir) then
        return false, "No Peripheral"
  end
  if peripheral.getType(sortdir) ~= "interactiveSorter" then
        return false, "Not a sorter"
  end
  sorter = peripheral.wrap(sortdir)
  while true do
    local ev, item, count = os.pullEvent()
    if ev == "isort_item" then
      --local id, data = librev.decodeToken(token)
      data = 0
      itemId = bit.band(item, 0x7fff)
      damageValue = bit.brshift(item, 15)
      sorter.sort(invdir)
      url = wwwdir .. "index.html?mode=insert&id=" .. itemId .. "&meta=" .. damageValue .. "&name=" .. name .. "&short=" .. short .. "&amount=" .. count .. "&password=" .. password
      sConnection = http.get(url)
      sConnection.close()
      print("'" .. name .. "' Inserted into database")
      return
    end
  end
end